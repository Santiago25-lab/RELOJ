<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reloj Neón con Flask</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Roboto:wght@300&display=swap" rel="stylesheet">
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: #1c2833; /* Fondo oscuro principal */
            background-image: radial-gradient(circle, #2c3e50, #1c2833); /* Degradado sutil */
            font-family: 'Roboto', sans-serif;
            margin: 0;
        }

        .clock-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
        }
        
        /* Estilos del contenedor principal del reloj analógico */
        .clock {
            width: 320px;
            height: 320px;
            border-radius: 50%;
            background: #2c3e50; /* Cara del reloj más oscura */
            border: 5px solid #1a222a;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.4), 
                        inset 0 0 15px rgba(0,0,0,0.5); /* Sombra neón y sombra interior */
            position: relative;
        }

        .clock-face {
            position: relative;
            width: 100%;
            height: 100%;
        }

        /* Estilos para las manecillas */
        .hand {
            width: 50%;
            height: 4px;
            position: absolute;
            top: 50%;
            transform-origin: 100%;
            transform: rotate(90deg); /* Posición inicial */
            transition: transform 0.1s cubic-bezier(0.4, 2.3, 0.6, 1);
            border-radius: 2px;
        }
        .hour-hand { width: 30%; left: 20%; background: #ecf0f1; height: 6px; box-shadow: 0 0 5px #ecf0f1;}
        .min-hand { width: 40%; left: 10%; background: #00ffff; height: 4px; box-shadow: 0 0 10px #00ffff;}
        .second-hand { width: 45%; left: 5%; background: #e74c3c; height: 2px; box-shadow: 0 0 10px #e74c3c;}

        /* Punto central */
        .center-dot {
            width: 14px;
            height: 14px;
            background: #e74c3c;
            border: 3px solid #1c2833;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }

        /* Estilos para los números */
        .number {
            position: absolute;
            width: 100%;
            height: 100%;
            text-align: center;
            font-size: 1.6rem;
            font-weight: bold;
            color: #ecf0f1;
            text-shadow: 0 0 5px rgba(236, 240, 241, 0.5);
        }
        .number-1 { transform: rotate(30deg); } .number-2 { transform: rotate(60deg); }
        .number-3 { transform: rotate(90deg); } .number-4 { transform: rotate(120deg); }
        .number-5 { transform: rotate(150deg); } .number-6 { transform: rotate(180deg); }
        .number-7 { transform: rotate(210deg); } .number-8 { transform: rotate(240deg); }
        .number-9 { transform: rotate(270deg); } .number-10 { transform: rotate(300deg); }
        .number-11 { transform: rotate(330deg); } .number-12 { transform: rotate(0deg); }
        .number span {
            display: inline-block;
            transform: rotate(calc(-1 * var(--rotation)));
        }

        /* Estilos para el reloj digital */
        #digital-clock {
            font-family: 'Orbitron', sans-serif; /* Fuente digital */
            font-size: 3rem;
            color: #ecf0f1;
            text-shadow: 0 0 15px rgba(0, 255, 255, 0.6);
            letter-spacing: 0.2rem;
        }
    </style>
</head>
<body>
    <div class="clock-container">
        <div class="clock">
            <div class="center-dot"></div>
            <div class="clock-face">
                <div class="hand hour-hand"></div>
                <div class="hand min-hand"></div>
                <div class="hand second-hand"></div>

                <!-- Números del Reloj -->
                <div class="number number-1" style="--rotation: 30deg"><span>1</span></div>
                <div class="number number-2" style="--rotation: 60deg"><span>2</span></div>
                <div class="number number-3" style="--rotation: 90deg"><span>3</span></div>
                <div class="number number-4" style="--rotation: 120deg"><span>4</span></div>
                <div class="number number-5" style="--rotation: 150deg"><span>5</span></div>
                <div class="number number-6" style="--rotation: 180deg"><span>6</span></div>
                <div class="number number-7" style="--rotation: 210deg"><span>7</span></div>
                <div class="number number-8" style="--rotation: 240deg"><span>8</span></div>
                <div class="number number-9" style="--rotation: 270deg"><span>9</span></div>
                <div class="number number-10" style="--rotation: 300deg"><span>10</span></div>
                <div class="number number-11" style="--rotation: 330deg"><span>11</span></div>
                <div class="number number-12" style="--rotation: 0deg"><span>12</span></div>
            </div>
        </div>
        <div id="digital-clock">00:00:00</div>
    </div>

    <script>
        const hourHand = document.querySelector('.hour-hand');
        const minHand = document.querySelector('.min-hand');
        const secondHand = document.querySelector('.second-hand');
        const digitalClock = document.getElementById('digital-clock');

        async function setDate() {
            try {
                const response = await fetch('/time');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                const { hour, minute, second } = data;

                // --- Lógica del Reloj Analógico ---
                const secondsDegrees = ((second / 60) * 360) + 90;
                const minsDegrees = ((minute / 60) * 360) + ((second/60)*6) + 90;
                const hourDegrees = ((hour / 12) * 360) + ((minute/60)*30) + 90;

                secondHand.style.transform = `rotate(${secondsDegrees}deg)`;
                minHand.style.transform = `rotate(${minsDegrees}deg)`;
                hourHand.style.transform = `rotate(${hourDegrees}deg)`;

                // --- Lógica del Reloj Digital ---
                const formattedHour = String(hour).padStart(2, '0');
                const formattedMinute = String(minute).padStart(2, '0');
                const formattedSecond = String(second).padStart(2, '0');
                
                digitalClock.textContent = `${formattedHour}:${formattedMinute}:${formattedSecond}`;

            } catch (error) {
                console.error("Error al obtener la hora:", error);
                digitalClock.textContent = "Error";
            }
        }

        setInterval(setDate, 1000);
        setDate();
    </script>
</body>
</html>
